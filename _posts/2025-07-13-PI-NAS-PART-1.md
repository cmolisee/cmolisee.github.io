---
title: "Pi Nas - Part 1"
date: 2025-07-13 13:07:00 -0700
categories: [RaspberryPi, Homelab]
tags: [homelab, raspberrypi, pi, nas, dietpi, omv]     # TAG names should always be lowercase
---

## Brief

I came across the Radxa Penta Sata Hat in my homelab research and decided to try out a DIY budget nas setup. 

After continued research I found quad NVME M.2 hats via GeeekPi but decided to stick with the sata hat for the following:

* NVME is more expensive.
* NVME uses more energy and therefore more heat.
* I am not convinced that the performance gains will end up being outweighing the cost.

Thus, here we will start - a DIY NAS using the raspberry pi, radxa penta sata hat, and 4 1TB 2.5" SSD's.

### Hardware

| Name                                                                                                                                 | Link                | Approx cost |
| ------------------------------------------------------------------------------------------------------------------------------------ | ------------------- | ----------- |
| 8GB Raspberry Pi 5                                                                                                                   | [Amazon][pi5]       | $90         |
| 5V Power Adapter                                                                                                                     | [Amazon][5vAdapter] | $13         |
| Active Cooler Heatsink                                                                                                               | [Amazon][heatsink]  | $10         |
| <sup id="fnref:footnote-1"><a href="#fn:footnote" class="footnote" rel="footnote" role="doc-noteref">1</a></sup>32GB MicroSD         | [Amazon][microsd]   | $7          |
| <sup id="fnref:footnote-2"><a href="#fn:footnote" class="footnote" rel="footnote" role="doc-noteref">2</a></sup>Radxa Penta Sata Hat | [Amazon][satahat]   | $80         |
| 4x 1TB SSD                                                                                                                           | [Amazon][ssd]       | 4x $50      |


<blockquote class="prompt-info">
  <div>
    <p>
      <em><sup>1</sup> You will need to flash this so make sure you have some kind of USB or other adapter to plug into your pc.<a href="#fnref:footnote-1" class="reversefootnote" role="doc-backlink">↩︎</a></em>
    </p>
  </div>
  <div>
    <p>
      <em><sup>2</sup> Make sure you buy from the official Radxa vendor or go through Radxa. Otherwise you will need to also purchase additional cables, screws, and other hardware.<a href="#fnref:footnote-2" class="reversefootnote" role="doc-backlink">↩︎</a></em>
    </p>
  </div>
</blockquote>

### Software

I know this guys, Juan - he's great. Well, he told me about this minimal Raspberry Pi image thing called DietPi which I figured must be great. However, I also had plans on using OMV (Open Media Vault) so I did some research and there are some things prerequisites for OMV that we should discuss.

All the OMV stuff can be found on their site here [OMV][omvPrerequisites]. The first order of business is hardware recommendations as follows:

| Item  | supported      | Minimal | Best     | Recommendation                                |
| ----- | -------------- | ------- | -------- | --------------------------------------------- |
| DRIVE | SSD/HDD/USB…   | 1,any   | 2,HHD    | 2 disks: Seagate Firecuda, WD Black, IronWolf |
| RAM   | 1GiB+ any      | 1GiB    | 4Gig     | 8GiB+ dual channel DDR4/DDR3                  |
| NIC   | WiFi/Ether/USB | any     | 10Mb NIC | 1GiB NIC or 10Gb NICs: SFP fiber              |
| CPU   | arm,x86,x64    | 32bit   | 64bit    | Intel Dual Core, AMD Ryzen                    |

<sup><em>**Content from this table is from [OMV][omvPrerequisites]</em></sup>

So we go 4 SSD's which covers <code class="language-plaintext highlighter-rouge">DRIVE</code> and the 8GB pi 5 covers the rest. We will touch on possible optimizations via the network port later but the OOTB Gigabit port will be fine to start. Next is the OS requirements:

| Item | Software        | Minimal   | Best            | Recommendation                               |
| ---- | --------------- | --------- | --------------- | -------------------------------------------- |
| OS   | Debian Linux    | oldstable | stable          | Current stable (plus 1 month released)       |
| BOOT | BIOS,UBOOT,UEFI | BIOS,mbr  | BIOS,gpt        | Disable Secure boot, gpt table               |
| SDS  | HDD,SSD,USB…    | 1, 4GiB   | 2, 120+500GiB   | Disk drive with 120G root size, 8G swap size |
| DDS  | HDD,SSD,USB…    | 0 or any  | HHD,1 per share | One disk or part per shared resource         |
| NET  | LAN,WAN,SAN,VPN | LAN       | SAN,PAN,LAN     | Fiber IPv4, or at least cable LAN            |

<sup><em>**Content from this table is from [OMV][omvPrerequisites]</em></sup>

Here the important thing to note is that our OS of choice, DietPi, is Debian based - so all good. Now the important part:

| Service Type | OMV Service  | DietPi Service                                                | Any Conflicts                                                 |
| ------------ | ------------ | ------------------------------------------------------------- | ------------------------------------------------------------- |
| HTTP Server  | nginx        | <span style="color:var(--prompt-danger-icon-color);">✗</span> | <span style="color:var(--prompt-danger-icon-color);">✗</span> |
| HTTP System  | PHP          | <span style="color:var(--prompt-danger-icon-color);">✗</span> | <span style="color:var(--prompt-danger-icon-color);">✗</span> |
| Display GUI  | lighdm,xdm.. | <span style="color:var(--prompt-danger-icon-color);">✗</span> | <span style="color:var(--prompt-danger-icon-color);">✗</span> |
| Network Man  | netplan.io   | ifupdown                                                      | <span style="color:var(--prompt-danger-icon-color);">✗</span> |
| SSH Server   | SSH          | DropBear                                                      | <span style="color:var(--clipboard-checked-color);">✓</span>  |
| SMB Server   | Samba        | <span style="color:var(--prompt-danger-icon-color);">✗</span> | <span style="color:var(--prompt-danger-icon-color);">✗</span> |
| Quota Man    | quota        | <span style="color:var(--prompt-danger-icon-color);">✗</span> | <span style="color:var(--prompt-danger-icon-color);">✗</span> |

<sup><em>**Content from this table is from [OMV][omvPrerequisites]</em></sup>

As you can see we have a conflict with <code class="language-plaintext highlighter-rouge">SSH Server</code> - Great to know before we start. We will get around this by disabling <code class="language-plaintext highlighter-rouge">DropBear</code> after installing DietPi and before installing OMV. Superficially there is a conflict with <code class="language-plaintext highlighter-rouge">ifupdown</code>; However, the plan is to install OMV over an ethernet connection so if we disable that I am not sure what we will do. At the time of writing this sentance we are going to just let it ride and see how it goes - i'll put a big red error disclaimer below with fun words about how wrong I was later.



<!-- Links -->
[pi5]: https://www.amazon.com/Raspberry-Pi-8GB-SC1112-Quad-core/dp/B0CK2FCG1K/ref=pd_ci_mcx_pspc_dp_2_t_2
[5vAdapter]: https://www.amazon.com/dp/B0CQ2DL2RW/ref=sspa_dk_detail_1
[heatsink]: https://www.amazon.com/Raspberry-Pi-Active-Cooler/dp/B0CLXZBR5P?ref_=ast_sto_dp
[microsd]: https://www.amazon.com/PNY-Elite-microSDHC-Memory-P-SDU32GU185GW-GE/dp/B07R8GVGN9/ref=sr_1_3
[satahat]: https://www.amazon.com/Radxa-Penta-SATA-HAT-Raspberry/dp/B0DX1HQWB2/ref=sr_1_2
[ssd]: https://www.amazon.com/PNY-CS900-Internal-Solid-State/dp/B07Y5VDNT9/ref=sr_1_1_sspa

[dietPiInstallGuide]: https://dietpi.com/docs/install/
[dietpidownload]: https://dietpi.com/#downloadinfo
[radxasatahat]: https://docs.radxa.com/en/accessories/penta-sata-hat
[omvPrerequisites]: https://docs.openmediavault.org/en/stable/prerequisites.html
